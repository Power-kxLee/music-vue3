import{r as f,o as l,c as u,w as g,K as y,a as v,b as E,d,T as S,e as D,f as P,g as I}from"./vendor.97637db4.js";const L=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function s(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerpolicy&&(r.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?r.credentials="include":e.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(e){if(e.ep)return;e.ep=!0;const r=s(e);fetch(e.href,r)}};L();var b=(t,o)=>{for(const[s,n]of o)t[s]=n;return t};const O={};function w(t,o){const s=f("router-view");return l(),u(s,null,{default:g(({Component:n})=>[(l(),u(y,{exclude:"songDetail"},[(l(),u(v(n)))],1024))]),_:1})}var T=b(O,[["render",w]]);const k="modulepreload",p={},R="./",i=function(o,s){return!s||s.length===0?o():Promise.all(s.map(n=>{if(n=`${R}${n}`,n in p)return;p[n]=!0;const e=n.endsWith(".css"),r=e?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${r}`))return;const a=document.createElement("link");if(a.rel=e?"stylesheet":k,e||(a.as="script",a.crossOrigin=""),a.href=n,document.head.appendChild(a),e)return new Promise((m,h)=>{a.addEventListener("load",m),a.addEventListener("error",h)})})).then(()=>o())},j=[{path:"/",component:()=>i(()=>import("./index.5fe6e1a3.js"),["assets/index.5fe6e1a3.js","assets/index.631df327.css","assets/vendor.97637db4.js"]),redirect:"home",children:[{path:"/home/like",name:"home/like",component:()=>i(()=>import("./like.737436fa.js"),["assets/like.737436fa.js","assets/vendor.97637db4.js"])},{path:"/home",name:"home",component:()=>i(()=>import("./reco.4b9cecc0.js"),["assets/reco.4b9cecc0.js","assets/reco.cba82608.css","assets/vendor.97637db4.js"])},{path:"/songSheet",name:"songSheet",component:()=>i(()=>import("./index.110fa212.js"),["assets/index.110fa212.js","assets/vendor.97637db4.js"])},{path:"/songSheet/hot",name:"songSheet/hot",component:()=>i(()=>import("./hot.645f9ea9.js"),["assets/hot.645f9ea9.js","assets/vendor.97637db4.js"])},{path:"/me",name:"me",component:()=>i(()=>import("./me.17e2eff0.js"),["assets/me.17e2eff0.js","assets/me.4fe6ae61.css","assets/vendor.97637db4.js"])}]},{path:"/playlist/detail/:id",name:"playList",component:()=>i(()=>import("./detail.7c98c0df.js"),["assets/detail.7c98c0df.js","assets/detail.7ddd7339.css","assets/vendor.97637db4.js"])},{path:"/song/detail/:id",name:"songDetail",component:()=>i(()=>import("./detail.e6b23118.js"),["assets/detail.e6b23118.js","assets/detail.07f90d55.css","assets/vendor.97637db4.js"])},{path:"/sign/login",name:"login",component:()=>i(()=>import("./login.93cc84ad.js"),["assets/login.93cc84ad.js","assets/login.c3834468.css","assets/vendor.97637db4.js"])},{path:"/search",name:"search",component:()=>i(()=>import("./search.065cc138.js"),["assets/search.065cc138.js","assets/search.83b35d5f.css","assets/vendor.97637db4.js"]),children:[{path:"/search/result/:keyword",name:"searchResult",component:()=>i(()=>import("./searchResult.b301e227.js"),["assets/searchResult.b301e227.js","assets/searchResult.10e3570e.css","assets/vendor.97637db4.js"])}]}],A=()=>({tabbarData:[],palyState:!1,lyric:{},songDetail:{},playTime:"",loginStatus:{},cookie:""}),x={setTabbarData(t,o){t.tabbarData=o},update(t,o){t[o.key]=o.value}},c=E({state:A,mutations:x}),V="https://netease-cloud-music-api2-ochre.vercel.app",$="116.25.146.177",C=({url:t,data:o,headers:s,formData:n=!1})=>{if(n&&Object.keys(o).length>0){const e=new URLSearchParams;for(const r in o)e.append(r,o[r]);o=e}return new Promise((e,r)=>{d({method:"post",url:t,data:o,headers:s,withCredentials:!0}).then(a=>{e(a.data)}).catch(a=>{r(a)})})},N=({url:t,data:o={}})=>{o.realIP=$;let s=[];for(let n in o){const e=o[n];s.push(`${n}=${e}`)}return t=V+t+"?"+s.join("&"),new Promise((n,e)=>{d({url:t,withCredentials:!0}).then(r=>{n(r.data)}).catch(r=>{e(r.data)})})},K={post:C,get:N},q=async()=>{const t=await K.get({url:"/login/status",data:{timerstamp:Date.now()}});return t.data.code===200&&(window.localStorage.setItem("loginStatus",JSON.stringify(t)),c&&(c.commit("update",{key:"loginStatus",value:t}),console.log("loginStatus",c.state.loginStatus))),t},H=t=>{const o=new Date(t);return`${o.getFullYear()}\u5E74${o.getMonth()+1}\u6708${o.getDate()}\u65E5`},J=(t,o)=>s=>{const n=void 0,e=s;t.id&&clearTimeout(t.id),t.id=setTimeout(()=>{t.call(n,e)},o)},M=t=>S.loading({message:t,forbidClick:!0,loadingType:"spinner"}),_=D({history:P(),routes:j});_.beforeEach((t,o,s)=>{(async()=>{localStorage.getItem("loginStatus")||await q();const r=JSON.parse(localStorage.getItem("loginStatus")||""),{profile:a}=r.data;localStorage.setItem("userId",a.userId),a.userId&&["login"].includes(t.name)?s({path:"/"}):s()})()});const B=I(T);B.use(_).use(c).mount("#app");export{b as _,K as a,M as c,J as d,H as s};
