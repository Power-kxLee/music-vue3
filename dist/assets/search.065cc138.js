import{h as z,i as r,v as G,j as H,V as O,r as T,o as n,k as u,y as l,m as c,p as a,N as k,S as q,F as w,a0 as p,a4 as v,Z as K,a5 as M,w as C,l as E,B as S,G as P,H as U,c as R,t as _,O as W,z as Z,n as I}from"./vendor.97637db4.js";import{_ as A,d as J,a as x}from"./index.0117ab02.js";const Q=i=>(P("data-v-02362fc4"),i=i(),U(),i),X={class:"searchBox"},Y={class:"searchHead"},ee={class:"bodys"},ae={class:"searchStatus"},se=I(),te={class:"keyword"},oe={key:0,class:"hot commonPanel"},le=Q(()=>l("header",null,"\u70ED\u641C\u699C",-1)),ne={class:"num"},re=z({setup(i){const t=r(""),y=r([]),V=r("\u8BF7\u8F93\u5165\u641C\u7D22\u5173\u952E\u8BCD"),h=r(!0),m=G(),B=H(),N=r([]),D=O(()=>d.value.length>0),d=r([]);console.log("route",B);const j=async()=>{const{data:s}=await x.get({url:"/search/hot/detail"});y.value=s},F=async()=>{const{data:s}=await x.get({url:"/search/default"});V.value=s.showKeyword},L=async s=>{h.value=!0;const{result:o}=await x.get({url:"/search/suggest",data:{keywords:s,type:"mobile",limit:10}});if(h.value=!1,Object.keys(o).length<1){d.value=[{feature:"\u6682\u65E0",keyword:"\u5339\u914D\u5931\u8D25\u54E6"}];return}const{allMatch:g}=o;d.value=!t.value||t.value.length===0?[]:g},b=async s=>{m.push({path:`/search/result/${s}`})},$=async s=>{if(m.push({path:"/search"}),N.value=[],!t.value||t.value.length===0){d.value=[];return}J(L,100)(s)};return(()=>{j(),F()})(),(s,o)=>{const g=T("router-view");return n(),u("div",X,[l("div",Y,[c(a(k),{name:"arrow-left",onClick:o[0]||(o[0]=e=>a(m).go(-1))}),c(a(q),{modelValue:t.value,"onUpdate:modelValue":[o[1]||(o[1]=e=>t.value=e),$],shape:"round",background:"none",placeholder:V.value,onSearch:o[2]||(o[2]=e=>b(t.value))},null,8,["modelValue","placeholder"])]),l("div",ee,[c(g),a(B).name==="search"?(n(),u(w,{key:0},[p(l("div",ae,[p(c(a(K),{type:"spinner",size:"16px"},null,512),[[v,h.value]]),p(c(a(M),null,{default:C(()=>[(n(!0),u(w,null,E(d.value,e=>(n(),R(a(W),{key:e.feature,"is-link":"",onClick:f=>b(e.keyword)},{title:C(()=>[c(a(k),{name:"search"}),se,l("span",te,_(t.value),1),l("span",null,_(e.keyword.replace(new RegExp(t.value),"")),1)]),"right-icon":C(()=>[]),_:2},1032,["onClick"]))),128))]),_:1},512),[[v,!h.value]])],512),[[v,a(D)]]),p(l("div",null,[y.value.length>0?(n(),u("article",oe,[le,l("ul",null,[(n(!0),u(w,null,E(y.value,(e,f)=>(n(),u("li",{key:e.score,class:Z({top3:f<3})},[l("span",ne,_(f+1),1),I(" "+_(e.searchWord)+" ",1),e.iconType===1?(n(),R(a(k),{key:0,name:"fire"})):S("",!0)],2))),128))])])):S("",!0)],512),[[v,!a(D)]])],64)):S("",!0)])])}}});var ie=A(re,[["__scopeId","data-v-02362fc4"]]);export{ie as default};
