import{g as _,h as B,i as c,j as z,k as K,u as C,l as k,o as d,c as I,w as b,m as h,n as P,p as V,t as A,q as x,F as S,s as L,r as j,v as U,x as q,y as H,a as M,K as Y}from"./vendor.f7f2557a.js";import{u as Z}from"./use-placeholder.32ea2fae.js";import{u as G,a as J}from"./useChildren.91c7542d.js";import{c as E,t as w,n as y,m as Q,g as W,w as D,e as X,B as ee,i as ae,I as te}from"./index.d8a3e501.js";import{B as re}from"./constant.8dd07f23.js";import{c as oe,r as ne,u as ue}from"./use-route.8005e772.js";import{_ as se}from"./index.cf012bec.js";var[O,$]=E("tabbar"),le={route:Boolean,fixed:w,border:w,zIndex:y,placeholder:Boolean,activeColor:String,beforeChange:Function,inactiveColor:String,modelValue:Q(0),safeAreaInsetBottom:{type:Boolean,default:null}},R=Symbol(O),ce=_({name:O,props:le,emits:["change","update:modelValue"],setup(e,{emit:r,slots:n}){var u=B(),{linkChildren:t}=G(R),s=Z(u,$),a=()=>{var l;return(l=e.safeAreaInsetBottom)!=null?l:e.fixed},o=()=>{var{fixed:l,zIndex:m,border:i}=e;return c("div",{ref:u,style:W(m),class:[$({fixed:l}),{[re]:i,"van-safe-area-bottom":a()}]},[n.default==null?void 0:n.default()])},g=l=>{l!==e.modelValue&&oe({interceptor:e.beforeChange,args:[l],done(){r("update:modelValue",l),r("change",l)}})};return t({props:e,setActive:g}),()=>e.fixed&&e.placeholder?s(o):o()}}),ie=D(ce),[de,T]=E("tabbar-item"),me=_({name:de,props:X({},ne,{dot:Boolean,icon:String,name:y,badge:y,iconPrefix:String}),emits:["click"],setup(e,{emit:r,slots:n}){var u=ue(),t=z().proxy,{parent:s,index:a}=J(R);if(!!s){var o=K(()=>{var{route:m,modelValue:i}=s.props;if(m&&"$route"in t){var{$route:p}=t,{to:f}=e,v=ae(f)?f:{path:f},N="path"in v&&v.path===p.path,F="name"in v&&v.name===p.name;return N||F}return(e.name||a.value)===i}),g=m=>{var i;s.setActive((i=e.name)!=null?i:a.value),r("click",m),u()},l=()=>{if(n.icon)return n.icon({active:o.value});if(e.icon)return c(te,{name:e.icon,classPrefix:e.iconPrefix},null)};return()=>{var{dot:m,badge:i}=e,{activeColor:p,inactiveColor:f}=s.props,v=o.value?p:f;return c("div",{class:T({active:o.value}),style:{color:v},onClick:g},[c(ee,{dot:m,content:i,class:T("icon")},{default:()=>[l()]}),c("div",{class:T("text")},[n.default==null?void 0:n.default({active:o.value})])])}}}}),ve=D(me);const fe=_({setup(e){C();const r=B("home"),n=k(),u=[{name:"home",icon:"home-o",to:"/home",label:"\u9996\u9875"},{name:"songSheet",icon:"music-o",to:"/songSheet",label:"\u6B4C\u5355"},{name:"contact",icon:"contact",to:"/contact",label:"\u6211\u7684"}];return u.forEach((t,s)=>{if(n.path.indexOf(t.to)===0)return r.value=t.name,!1}),console.log(n.path),(t,s)=>(d(),I(x(ie),{modelValue:r.value,"onUpdate:modelValue":s[0]||(s[0]=a=>r.value=a)},{default:b(()=>[(d(),h(S,null,P(u,a=>c(x(ve),{key:a.name,name:a.name,icon:a.icon,to:a.to},{default:b(()=>[V(A(a.label),1)]),_:2},1032,["name","icon","to"])),64))]),_:1},8,["modelValue"]))}});const _e={class:"m-header"},he=_({setup(e){const r=C(),n=k();let u=B([]);return u.value=r.state.tabbarData,L(()=>r.state.tabbarData,t=>{u.value=t}),(t,s)=>{const a=j("router-link");return d(),h("header",_e,[U("ul",null,[(d(!0),h(S,null,P(x(u),o=>(d(),h("li",{key:o.to,class:q({cur:x(n).path===o.to})},[c(a,{to:o.to},{default:b(()=>[V(A(o.name),1)]),_:2},1032,["to"])],2))),128))])])}}});var pe=se(he,[["__scopeId","data-v-6f0dc2fa"]]);const be={home:[{name:"\u63A8\u8350",to:"/home"},{name:"\u559C\u6B22\u7684\u97F3\u4E50",to:"/home/like"}],songSheet:[{name:"\u6B4C\u5355",to:"/songSheet"},{name:"\u70ED\u95E8\u6B4C\u5355",to:"/songSheet/hot"}]},ye=_({setup(e){const r=k(),n=C();H((t,s)=>{u(t.name)});const u=t=>{["home","songSheet"].forEach((a,o)=>{if(t.indexOf(a)===0){t=a;return}}),n.commit("setTabbarData",be[t])};return u(r==null?void 0:r.name),(t,s)=>{const a=j("router-view");return d(),h(S,null,[c(pe),c(a,null,{default:b(({Component:o})=>[(d(),I(Y,null,[(d(),I(M(o)))],1024))]),_:1}),c(fe)],64)}}});export{ye as default};
